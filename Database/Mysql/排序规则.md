# 优先级
Mysql Collation (排序规则) **优先级从低到高**为：

MySQL实例级别 <<  库级别 <<  表级别 << 列级别 << SQL指定

## 优先级设置
###  MySQL实例级别

修改 mysql 的配置文件 my.ini

### 库级别
新建库时设置
```sql
CREATE DATABASE TESTDB 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
```

### 表级别
在创建表的时候指定表的字符集和排序规则

```sql
use testdb;

CREATE TABLE user(
  `id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

```


### 列级别
在创建表的时候指定列的字符集和排序规则
```sql
CREATE TABLE `user` (
  `id` int(11) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8mb4 DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### SQL语句指定
执行SQL 语句时指定排序
```sql
SELECT id, name FROM `user` 
ORDER BY name COLLATE utf8mb4_unicode_ci;
```


# 常用排序规则

MySQL中常用的排序规则(这里以utf8mb4字符集为例)主要有：utf8mb4_general_ci、utf8mb4_general_cs、utf8mb4_unicode_ci 等。

这里需要注意下ci和cs的区别:

-   *ci 是 ’Case Insensitive’ 缩写*， 即 “大小写不敏感”，a和A会在字符判断中会被当做一样的;
-  *cs 是 ‘Case Sensitive’ 缩写*，即“大小写敏感”，a 和 A 会有区分；

比如下面这个查询：

```sql
# 假设数据库中SC_Teacher表存在一条数据，其中TeacherName字段的值为 "A"

select * from SC_Teacher where TeacherName = 'a' 
-- 用 utf8mb4_general_ci 排序规则, 可以查到数据
-- 用 utf8mb4_general_cs 排序规则, 查询不到数据
```

## 排序规则示例
-   **utf8mb4_general_ci**： 查询时不区分大小写匹配
-   **utf8mb4_general_cs**： 查询时区分大小写匹配
-   **utf8mb4_bin**： 字符串每个字符串用二进制数据编译存储。 区分大小写，而且可以存二进制的内容，与utf8_general_cs一样，区分大小写
-   **utf8mb4_unicode_ci** ： 和utf8_general_ci一样，不区分大小写

## 注意
使用 utf8mb4 而不是 utf8，具体参考[[utf8mb4]]。

