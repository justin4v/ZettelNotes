#Index 

# 一级索引 
- **索引和数据存储在一起**，都存储在同一个B+tree中的叶子节点。官方称为 **聚簇索引**（clustered index）；
- 一般主键索引都是一级索引。

# 二级索引 
- 二级索引树的**叶子节点存储的是主键而不是数据**。官方称为 **非聚簇索引**；
- 在找到索引后，得到对应的主键，*再回到一级索引中找主键对应的数据记录*，称为”**回表**“。


常用的二级索引包括：
1.  **唯一索引(Unique Key)** ：唯一索引也是一种约束。**唯一索引的属性列不能出现重复的数据，但是允许数据为 NULL，一张表允许创建多个唯一索引。** 建立唯一索引的目的大部分时候都是为了该属性列的数据的唯一性，而不是为了查询效率。
2.  **普通索引(Index)** ：**普通索引的唯一作用就是为了快速查询数据，一张表允许创建多个普通索引，并允许数据重复和 NULL。**
3.  **前缀索引(Prefix)** ：前缀索引只适用于字符串类型的数据。前缀索引是对文本的前几个字符创建索引，相比普通索引建立的数据更小， 因为只取前几个字符。

# 对比
- 一级索引可以单独存在；
- 二级索引不能单独存在，必须依附于一级索引

## 二级索引优缺点

### 优点
1. 减少数据冗余；  
2. 减少行移动或者数据页分裂时二级索引的维护工作；
3. 当数据需要更新的时候，二级索引不需要修改，只需要修改一级索引，一个表只能有一个一级索引，其他的都是二级索引，这样只需要修改一级索引就可以了，不需要重新构建二级索引  
### 缺点
1. 根据二级索引查找行的完整数据需要回表

## 非聚集索引一定回表查询吗(覆盖索引)?
- 使用**覆盖索引就不会回表查询**。

- 用户准备使用 SQL 查询用户名，而用户名字段正好建立了索引。
```sql
 SELECT name FROM table WHERE name='guang19';
```
 - 索引的 key 本身就是 name，查到对应的 name 直接返回就行了，无需回表查询。

## 覆盖索引
- 如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为“覆盖索引”。
- 在 InnoDB 存储引擎中，如果不是主键索引，叶子节点存储的是主键+列值。最终还是要“回表”，也就是要通过主键再查找一次，效率很低些。
- 覆盖索引就是把要查询出的列和索引是对应的，不做回表操作！
- 覆盖索引即需要**查询的字段正好是索引的字段**，直接使用索引可以查到数据了， 而*无需回表查询*。

# 参考
1. [MySQL的二级索引](https://www.cnblogs.com/luler/p/15496511.html)