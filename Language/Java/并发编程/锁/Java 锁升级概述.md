#Lock 
# 状态
锁的状态总共有四种：无锁状态、[[偏向锁]]、[[轻量级锁]] 和 [[重量级锁]]。

参考：
[[对象结构#Markword]]

# 锁升级
- 随着*锁的竞争（CAS 失败）*，锁可以从偏向锁升级到轻量级锁，再升级的重量级锁；
- 但是*锁的升级是单向的*，也就是说只能从低到高升级，不会出现锁的降级。

## 锁升级示意
![[重量级锁、轻量级锁和偏向锁之间转换.png]]

1. *无锁或者未启用偏向锁*的状态下，biased_lock | lock 为 0|01；
2. 在*启用偏向锁*的情况下，biased_lock | lock 为 1|01； 
3. 偏向锁解锁后会回归到初始态，称为 重偏向。
