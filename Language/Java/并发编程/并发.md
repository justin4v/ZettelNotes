# 概念
## 并发和并行
- **并发**是指*在一个时间段内处理多个任务*，但多个任务不一定要在同一时刻执行；
- **并行**是指*在同一个时刻处理多个任务*。

## 竞态条件和临界区
1. 竞态条件（race condition）：当两个线程（进程）*竞争程序中同一资源*时，如果*对资源的访问顺序影响运行结果*，就称程序存在竞态条件。
2. 临界区（critical sections）：导致竞态条件发生的*代码区*称作临界区。

参考：
- [[线程安全#竞态条件]]

# 并发的优点
1. **提升资源利用率**；
2. **程序响应更快**。

## DES
在处理需要耗时较长的任务时，CPU通常需要等待。可以切换到不同线程执行其他任务，使得 CPU 始终处于工作状态，可以*提升 CPU 利用率*。

如果服务器在监听的时候，请求才能被接收，当服务器忙于处理一个耗时很长的请求，则无法响应其他客户端。
如果监听线程把请求传递给*工作者线程(worker thread)*，然后返回去监听新请求，则能*响应新请求更快*。


# 并发的问题
[[程序性能的限制与解决]]中引入了几种提高性能的策略，同时也带来了并发中的几种问题：
- [[线程安全]]
- 活跃性问题
- 性能问题

## 安全问题 Safety hazards
线程安全的含义是：**永远不发生糟糕的事情（保证程序的正确性）**。

多个线程同时访问和修改相同的变量时，将会在串行编程模型中引入非串行因素，在没有充足同步的情况下，多个线程的操作执行顺序是不可预测的，可能会产生奇怪的结果。。


## 活跃性问题 Liveness hazards
活跃性的含义是：**某件正确的事情一定会发生（程序能正常的执行完）**。

当某个操作无法继续进行下去的时候，就发生了活跃性问题，如发生了无限循环，使得之后的代码无法执行，如Thread A 等待 Thread B 释放资源，但是 Thread B 永远都不释放，则 Thread A 会一直等待。

## 性能问题 Performance hazards



