#Thread-safe

# 含义
线程安全的**含义**是：***永远不发生糟糕的事情（保证程序的正确性）***。

发生问题的**原因**：多个线程同时访问和修改相同的变量时，将会在串行编程模型中引入非串行因素，在没有充足同步的情况下，多个线程的操作执行顺序是不可预测的，可能会产生奇怪的结果。

## 简要定义
当多个线程访问某个类时，类始终*表现出正确的行为*，称这个类是线程安全的。

## 详细定义
A class  is _threadsafe_ if it **behaves correctly** when used from multiple threads, **regardless of how those threads are executed**, and **without demanding additional coordination** from the calling code.

1. “**Behaves correctly**” ： *satisfying its specification and preserving its response invariant*；
2. “**Regardless of how threads are executed**” ： threads might be on multiple processors or timesliced on the same processor；
3. “**without additional coordination**” ： *can’t put preconditions on its caller related to timing*, like “you can’t call `get()` while `set()` is in progress.”

当多个线程访问某个类时，不管运行时环境采用*何种调度方式或线程将如何交替执行*，且在主调代码中*不需要任何额外的同步或协同*，这个类都能*表现出正确的行为*，则称这个类是线程安全的。


# 线程安全控制
线程安全的代码，核心在于
**对状态访问操作的管理**，特别是对共享的( Shared )和可变的（Mutable）状态的访问
有以下的方式：
1. **不在线程之间共享该状态变量**；
2. **将状态变量改为不可变**；
3. **在访问状态变量时使用同步**






