#Proxy #Spring 

# 问题
Spring AOP 方法内部调用，切面逻辑是不生效的(动态代理)。

```java
//事务注解
@Transactional(rollbackFor = Exception.class)
@Override  
public Result saveApi(Api api) {  
    saveApi(api);    
    return Result.OK();  
}

private void saveApi(Api api){
    //数据库操作
	sqlSave(api);
}
```

由于 @Transactional 使用动态代理，实际 SQL 操作在 private 方法中，@Transactional 无法生效。

解决方案有两个:
 - 一是 `AopContext#currentProxy`;
 - 二是在当前类中注入自己，再用该对象进行方法内部调用。